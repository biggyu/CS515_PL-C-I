# ru-compiler – Generating x86-64 code

This project implements a **x86-64 assembly code** for an expression language using Rust.
The scanner&parser reads expressions from an input file, parses them according to a context-free grammar, creates parse tree, AST, DAG representation and LLVM IR. Using the LLVM IR, it generates an assembly code for x86-64.

---

## Project Structure
```
rucompiler-x86/
├── first/ # Cargo project
├ ├── src/
│ │ ├── ast.rs
│ │ ├── dag.rs
│ │ ├── cfg.rs
│ │ ├── grammar.rs
│ │ ├── llvm.rs
│ │ ├── main.rs
│ │ ├── parser.rs
│ │ ├── scanner.rs
│ │ └── x86.rs
│ └── Cargo.toml
├── second/ # Cargo project
│ ├── src/
│ │ ├── ast.rs
│ │ ├── dag.rs
│ │ ├── grammar.rs
│ │ ├── llvm.rs
│ │ ├── main.rs
│ │ ├── parser.rs
│ │ ├── scanner.rs
│ │ └── x86.rs
│ └── Cargo.toml
├── test_first/ # first test cases
│ ├── test1.exp
│ ├── test1.s
│ ├ ...         # Additional test cases
│ └── test10.s
├── test_second/ # second test cases
│ ├── test1.c
│ ├── test1.out
│ ├── test1.rucomp
│ ├── test1.s
│ ├ ...         # Additional test cases
│ └── test10.s
├── build_first.sh # Custom build script for first
├── build_second.sh # Custom build script for second
├── run_tests_first.sh # Custom test run script
├── run_tests_second.sh # Custom test run script
├── test_first.c # assembly run code
├── test_second.c # assembly run code
├── run_assembly.sh # Custom assembly code run script
├── rucompiler-x86-first # Built first executable (generated by build script)
└── rucompiler-x86-second # Built second executable (generated by build script)
``` 

## Build Instructions

To compile the project and produce an executable:

```bash
sh build_first.sh
sh build_second.sh
```

## Run Instructions

To run tests on all test#.s & test#.rucomp files and generate test#.s"

```bash
sh run_tests_first.sh
sh run_tests_second.sh
```

## Compile LLVM IR

To run the x86-64, run test#.c file with the s file created. If there is an error in the expression, the s file will not be created.

```bash
gcc test#.c test#.s -o test#.out
./test#.out
```
